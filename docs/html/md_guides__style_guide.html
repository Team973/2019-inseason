<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2019-inseason: The Official C++ Style Guide of FRC Team 973: The Greybots</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">2019-inseason
   &#160;<span id="projectnumber">unspecified</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The Official C++ Style Guide of FRC Team 973: The Greybots </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is derived from Google's C++ <a href="https://google.github.io/styleguide/cppguide.html">Style Guide</a>.</p>
<p>Note: We are strictly implementing this style guide on all code written starting on the 2018 Season. Pull requests will be declined once your code does not follow any of the rules defined in this document. :+1:</p>
<h2>Automated tooling</h2>
<p>We have automated tooling to help folks format their code correctly. This tooling depends on clang-format-5.0 or greater. It is highly recommended that users install the pre-commit hook so that their commits can be checked for style.</p>
<p>The configuration for clang-format is stored in src/.clang-format</p>
<h3>Installing clang-format</h3>
<p>The default version of clang-format included with most distributions is too old for our purposes and does not support our style. You can install a more recent version by running one of the following commands:</p>
<h4>Ubuntu</h4>
<p>These instructions were tested in ubuntu xenial and artful </p><div class="fragment"><div class="line">sudo apt install clang-format-5.0</div></div><!-- fragment --><h4>Mac with Homebrew</h4>
<p>These instructions were not tested. Good luck. </p><div class="fragment"><div class="line">brew install clang-format</div></div><!-- fragment --><h3>Installing the pre-commit hook</h3>
<p>cd into the WORKSPACE directory and type</p>
<div class="fragment"><div class="line">./tools/style/install_style_check_hook.sh</div></div><!-- fragment --><p>Check that there were no errors in the output. If all was successful, then next time you commit the script will automatically check your changed files for style violations.</p>
<h3>Enforcing the style guide in your program</h3>
<p>Run this command whenever you want to enforce the style guide in your program. </p><div class="fragment"><div class="line">./tools/styles/enforce_style.sh</div></div><!-- fragment --><h2>Style Rules</h2>
<h3>Rule #1: Indentions</h3>
<p>Instead of using the <code>tab</code> character in doing indentions for both the header and source files, use <b>four spaces</b>. For parent classes, use 8 spaces. <code>Public</code>, <code>private</code>, and <code>protected</code> should not be indented. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">class Foo</div><div class="line">        : public Parent1</div><div class="line">        , public Parent2 {</div><div class="line">public:</div><div class="line">    void function();</div><div class="line">private:</div><div class="line">    void doSomething();</div><div class="line">};</div></div><!-- fragment --><h3>Rule #2: Naming variables according to scope</h3>
<p>Member, static, and global variables should be named starting with <code>m_</code>, <code>s_</code>, or <code>g_</code> respectively. In declaring member variables in a class, there should be a space between the type and the name. Declaring constants should have all characters in uppercase and should use underscores instead of spaces. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">int g_value = 10</div><div class="line">static const double  TALON_ID = 0;</div><div class="line">class MyClass() {</div><div class="line">private:</div><div class="line">    int m_value;</div><div class="line">};</div></div><!-- fragment --><h3>Rule #3: Where to initialize variables</h3>
<p>Place a function's variables in the narrowest scope possible, and initialize variables in the declaration. Here is a <a href="https://stackoverflow.com/questions/23345554/the-differences-between-initialize-define-declare-a-variable">reference</a> for differentiating initialization from declaration </p><div class="fragment"><div class="line"> {c++}</div><div class="line">void function() {</div><div class="line">    int var;</div><div class="line">    var = 5; //Bad -- initialization separate from declaration</div><div class="line">    int num = 10; //Good -- declaration has initialization</div><div class="line">    Foo f;  </div><div class="line">    for (int i = 0; i &lt; 100; i++) {</div><div class="line">        f.DoSomething(i);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3>Rule #4: <code>#ifndef</code> and <code>#pragma</code> directives</h3>
<p>Instead of using the <code>#ifndef</code> and <code>#define</code> directives, use <code>#pragma once</code> in the beginning of header files. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">#pragma once</div><div class="line"></div><div class="line">class MyClass {</div><div class="line">public:</div><div class="line">    void Foo();</div><div class="line">};</div></div><!-- fragment --><h3>Rule #5: Public Inheritance</h3>
<p>All inheritance should be public. If you want to do private inheritance, you should be including an instance of the base class as a member instead. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">#pragma once</div><div class="line"></div><div class="line">class ParentClass : public ChildClass {</div><div class="line">private:</div><div class="line">    int m_value;</div><div class="line">};</div></div><!-- fragment --><h3>Rule #6: When to use a Struct vs. Class</h3>
<p>Use a struct only for passive objects that carry data; everything else is a class. The struct and class keywords behave almost identically in C++. Please note that structs and classes should have the first letter in their names capitalized. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">struct MyStruct {</div><div class="line">    uint32_t time;</div><div class="line">    bool state;</div><div class="line">};</div><div class="line"></div><div class="line">class MyClass {</div><div class="line">public:</div><div class="line">    double Divide(double x, double y);</div><div class="line">    double Round(double n);</div><div class="line">};</div></div><!-- fragment --><h3>Rule #7: Explicit Conversions</h3>
<p>The compiler is allowed to make one implicit conversion to resolve the parameters to a function. What this means is that the compiler can use constructors callable with a single parameter to convert from one type to another in order to get the right type for a parameter. Prefixing the explicit keyword to the constructor prevents the compiler from using that constructor for implicit conversions. Use the explicit keyword for conversion operators and single-argument constructors. For an in-depth explanation of what the explicit keyword does go <a href="https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-mean">here</a>. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">class Foo {</div><div class="line">    explicit Foo(int x);</div><div class="line">};</div><div class="line"></div><div class="line">void Func(Foo f);</div></div><!-- fragment --><h3>Rule #8: No Operator Overloading</h3>
<p>C++ permits user code to declare overloaded versions of the built-in operators using the operator keyword, so long as one of the parameters is a user-defined type. The operator keyword also permits user code to define new kinds of literals using operator"", and to define type-conversion functions such as operator bool().</p>
<h3>Rule #9: Declaration Order</h3>
<p>Group similar declarations together, placing public parts earlier. A class definition should usually start with a public: section, followed by protected:, then private:. Omit sections that would be empty. Within each section, generally prefer grouping similar kinds of declarations together, and generally prefer the following order: types (including typedef, using, and nested structs and classes), constants, factory functions, constructors, assignment operators, destructor, all other methods, data members. Do not put large method definitions inline in the class definition.</p>
<div class="fragment"><div class="line"> {c++}</div><div class="line">class Foo {</div><div class="line">public:</div><div class="line">    void function();</div><div class="line">protected:</div><div class="line">    static constexpr double CONSTANT = 0;</div><div class="line">private:</div><div class="line">    void doSomething();</div><div class="line">};</div></div><!-- fragment --><h3>Rule #10: Access Control</h3>
<p>Make data members private, unless they are static const (and follow the naming convention for constants).</p>
<h3>Rule #11: Control Flow Format</h3>
<p>Curly braces around control flow primitives are mandatory even if there's just one line inside. Always put a space between <code>for</code>, <code>if</code>, and <code>else</code>, and <code>{</code> in all functions and all control flow statements. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">int total;</div><div class="line">for (int i = 0; i &lt; 10; i++) {</div><div class="line">    if (total == 100) {</div><div class="line">        this.Exit();</div><div class="line">    }</div><div class="line">    else {</div><div class="line">        total += i;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3>Rule #12: Function Overloading</h3>
<p>Use overloaded functions (including constructors) only if a reader looking at a call site can get a good idea of what is happening without having to first figure out exactly which overload is being called. You may write a function that takes a const string&amp; and overload it with another that takes const char*.</p>
<div class="fragment"><div class="line"> {c++}</div><div class="line">class MyClass {</div><div class="line">public:</div><div class="line">    void Analyze(const string &amp;text);</div><div class="line">    void Analyze(const char *text, size_t textlen);</div><div class="line">};</div></div><!-- fragment --><h3>Rule #13: Switch Statements</h3>
<p>Use switch statements whenever a sequence of actions/methods must be executed in an orderly manner. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">void Shoot() {</div><div class="line">    int count = 1;</div><div class="line">    switch(count) {</div><div class="line">        case 1:</div><div class="line">            StartFlywheel();</div><div class="line">            count++;</div><div class="line">            break;</div><div class="line">        case 2:</div><div class="line">            if (UpToSpeed()) {</div><div class="line">                count++;</div><div class="line">            }</div><div class="line">            break;</div><div class="line">        case 3:</div><div class="line">            Agitate();</div><div class="line">            break;</div><div class="line">        default:</div><div class="line">            break;</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><h3>Rule #14: <code>#include</code> directive</h3>
<p>When using <code>#include</code>, standard libraries should be included in brackets i.e. <code>#include &lt;stdio.h&gt;</code>. All other files should use quotes, and should have the full path from the WORKSPACE file i.e. <code>#include "src/lib/util/Util.h"</code>. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &quot;src/RobotInfo.h&quot;</div><div class="line"></div><div class="line">namespace frc {</div><div class="line">void printMessage() {</div><div class="line">    printf(&quot;Hello World!&quot;);</div><div class="line">}</div><div class="line">}</div></div><!-- fragment --><h3>Rule #15: Functions with multiple parameters</h3>
<p>Whenever a function has multiple (3 or more) parameters, each line must have at most 3 parameters. Exceeding numbers of parameters must be placed on the next line, and it must be indented and aligned with the first parameter of the previous line. </p><div class="fragment"><div class="line"> {c++}</div><div class="line">double Foo(int a, int b, bool status</div><div class="line">           double c) {</div><div class="line">    //Do something here       </div><div class="line">}</div></div><!-- fragment --><h3>Rule #16: Initializer Lists</h3>
<p>If the initializer list spans multiple lines, then there should be one initialization per line. Each initialization should be indented with 8 spaces. The opening bracket should be on the line of the last initializer. Initializers should be in the order that the member variables appear in the class definition (gcc will warn you if you violate the last rule here).</p>
<div class="fragment"><div class="line">Autonomous::Autonomous(Disabled *disabled)</div><div class="line">        : m_noAuto(new NoAuto())</div><div class="line">        , m_forwardAuto(new ForwardAuto())</div><div class="line">        , m_disabled(disabled) {</div><div class="line">    // constructor body</div><div class="line">}</div></div><!-- fragment --><h3>Rule #17: <code>enum</code> vs. <code>enum class</code></h3>
<p>+Use an <code>enum class</code> rather than <code>enum</code> when possible. if using an <code>enum</code>, having the same name for an item in two or more enumerations will give an error and will cause confusion when someone is reading your code. Using an <code>enum class</code> instead makes our code easier to read and compile since we have to explicitly call what enum class we are using.</p>
<div class="fragment"><div class="line">enum class PandaType {</div><div class="line">    Red,   // if we used regular enum, this would conflict with TulipColor::Red</div><div class="line">    Giant,</div><div class="line">    Qunling</div><div class="line">};</div><div class="line"></div><div class="line">enum class TulipColor {</div><div class="line">    Red,    // if we used regular enum, this would conflict with PandaType::Red</div><div class="line">    Pink,</div><div class="line">    Purple,</div><div class="line">    Yellow</div><div class="line">};</div><div class="line"></div><div class="line">void SaveThePandas(PandaType type) {</div><div class="line">    // TODO</div><div class="line">}</div><div class="line"></div><div class="line">int main(void) {</div><div class="line">    SaveThePandas(PandaType::Red);</div><div class="line">    // You must explicitly reference PandaType to use its own definition of Red. This makes it</div><div class="line">    // easier to read because you can look for the definition of PandaType.  </div><div class="line">}</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
